<!doctype html>
<html lang="en">

<head>
	<title>XView.js - Demo/foreachAndSearch</title>

	<!-- Import basic uncompressed library files -->
	<script src="../js/XElement.js"></script>
	<script src="../js/XView.js"></script>

	<!-- Import uncompressed pre-made function pack -->
	<script src="../js/XFunctions.js"></script>

	<!-- Throw in a few styles -->
	<style>
		body,
		html {
			margin: 0;
			background: #222021;
			color: white;

			font-family: sans-serif;
		}

		.test {
			padding: 10px;
		}

		.noResults {
			padding: 10px 30px;
			text-align: center;
		}

		.author {
			color: white;
			font-size: 12px;
			padding: 5px 10px;
			text-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);

			background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
			border-radius: 3px;
		}

		ul {
			list-style: none;
			padding: 0 30px;
		}

		input {
			float: right;
			margin-top: 20px;
			background: transparent;
			padding: 10px 20px;
			color: white;
			font-family: inherit;
			font-size: 16px;
			border: none;
			border-left: 2px solid rgba(255, 255, 255, 0.185);
			background: #333;
		}

		input:focus {
			outline: none;
			border-color: gold;
		}

		h1 {
			float: left;
		}

		header {
			padding: 5px 30px;
			overflow: hidden;
		}

		.searchResults {
			padding: 10px 20px;
			background: #333;
			margin-bottom: 10px;
		}

		p {
			color: rgba(255, 255, 255, 0.5)
		}
	</style>
</head>

<body>
	<div class="template">

		<header>
			<h1 x-show="search">Top results matching "${search}"</h1>
			<h1 x-show="!search">All posts</h1>
			<input x-value="search" placeholder="Search">
		</header>

		<ul>
			<li class="searchResults" x-foreach="results">
				<h3 class="headline">${title} -
					<span class="author">by ${author}</span>
				</h3>
				<p>${desc}</p>
			</li>
		</ul>

		<div x-show="!results" class="noResults">No Results :(</div>
	</div>

	<!-- Custom JS that makes the magic happen -->
	<script>
		// Some amazing test data to render the list with
		var testData = [{
			title: "Leroy found dead",
			desc: "Mr Jenkins collapsed after what can only be described as an aggressive attempt at self destruction. It would appear that he was successful.",
			author: "Batman"
		}, {
			title: "I have no fingers",
			desc: "So how am I typing this?",
			author: "Fingerless Jack"
		}, {
			title: "Where are my eyes?",
			desc: "I cannot see.",
			author: "Jacob"
		}, {
			title: "184753 Chicken recipies",
			desc: "EVERYTHING DOES TASTE LIKE CHICKEN.",
			author: "Jacob"
		}, {
			title: "XViews is the best thing since sliced bread",
			desc: "And I hate sliced bread.",
			author: "Mr Magoo"
		}];

		// Create a new view
		var view = new View(".template");

		// Render the test data into the view
		view.render({
			results: testData
		});

		// Add the search functionality
		view.watch("search", function () {

			var filter = view.data.search.toLowerCase(),
				res = testData.filter(function (item) {

					for (var key in item) {
						if (item[key].toLowerCase().indexOf(filter) > -1) return true;
					}

					return false;
				});

			view.set("results", res);
		});
	</script>
</body>

</html>